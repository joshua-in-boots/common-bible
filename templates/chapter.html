<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>${book_name} ${chapter_number}장</title>
    ${css_link_tag}
  </head>

  <body>
    <!-- 고정 헤더 -->
    <header class="fixed-header">
      <div class="fixed-header-content">
        <!-- 상단 행: 브레드크럼(좌) + 검색 폼(우) -->
        <div class="breadcrumb-row">
          <nav id="bible-breadcrumb" aria-label="Breadcrumb">
            <!-- 동적으로 채워짐 -->
          </nav>
          <form
            id="verse-search-form"
            class="breadcrumb-search"
            role="search"
            aria-label="성경 구절 검색"
          >
            <label for="verse-search" class="screen-reader-text">검색</label>
            <input
              type="text"
              id="verse-search"
              placeholder="절 ID 또는 단어 검색 (예: '${book_name} ${chapter_number}:3' 또는 '하느님')"
              aria-describedby="search-help"
            />
            <button id="verse-search-btn" type="submit" title="검색">
              검색
            </button>
          </form>
        </div>

        <!-- 장 제목 -->
        <div class="chapter-title-row">
          ${prev_button_html}
          <h1 class="chapter-title">${book_name} ${chapter_number}장</h1>
          ${next_button_html}
        </div>
      </div>
    </header>

    <div class="page-wrap">
      <article id="${chapter_id}">
        <!-- 오디오 플레이어 (오디오 파일이 있는 경우) -->
        <div class="audio-player-container" id="audio-container">
          <h2 class="screen-reader-text">성경 오디오</h2>
          <span class="audio-label" aria-hidden="true">오디오 듣기</span>
          <audio
            controls
            preload="metadata"
            class="bible-audio"
            aria-label="$audio_title"
          >
            <source src="$audio_path" type="audio/mpeg" />
            <p>
              브라우저가 오디오 재생을 지원하지 않습니다.
              <a href="$audio_path">오디오 파일 다운로드</a>
            </p>
          </audio>
        </div>

        <!-- 오디오 파일이 없는 경우 -->
        <div class="audio-unavailable-notice" id="audio-unavailable">
          <p class="notice-text" aria-live="polite">
            <span class="icon" aria-hidden="true">🎵</span>
            이 장의 오디오는 현재 준비 중입니다.
          </p>
        </div>

        ${verses_content}
      </article>
    </div>

    ${alias_data_script} ${js_script_tag}
  </body>
</html>
